# Автоматическая инициализация БД

## Как это работает

Файл `database/schema.sql` **автоматически выполнится** при первом запуске MySQL-контейнера.

### Механизм

MySQL Docker-образ поддерживает папку `/docker-entrypoint-initdb.d/`:
- Все `.sql` файлы из этой папки выполняются **один раз** при создании БД
- Файлы запускаются в алфавитном порядке (`01-schema.sql`, `02-data.sql`, и т.д.)

### Важно! ⚠️

Скрипты выполняются **только при первом запуске** (когда volume `db_data` пустой).

Если нужно переинициализировать БД:

```bash
# Остановить и удалить volume
./docker.sh down
docker volume rm docker_db_data

# Запустить заново — schema.sql выполнится автоматически
./docker.sh up
```

## Проверка

```bash
# Подожди 10 сек после запуска, затем проверь:
docker exec -i store-project-db mysql -uroot -proot store_db -e "SHOW TABLES;"

# Должны быть таблицы:
# - products
# - orders
# - order_items
```

## Добавление новых миграций

Создавай файлы с префиксами:

```
database/
├── 01-schema.sql       ← основная схема
├── 02-seed-data.sql    ← тестовые данные
├── 03-views.sql        ← представления
└── 04-procedures.sql   ← хранимые процедуры
```

Все выполнятся при первом запуске в порядке номеров.

